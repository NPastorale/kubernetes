apiVersion: apps/v1
kind: Deployment
metadata:
  name: kuard
spec:
  selector:
    matchLabels:
      app: kuard
  replicas: 1
  template:
    metadata:
      labels:
        app: kuard
    spec:
      containers:
        - image: nginx
          imagePullPolicy: Always
          name: kuard
          ports:
            - containerPort: 80
          volumeMounts:
            - mountPath: /usr/share/nginx/html/index.html
              name: nginx-conf
              subPath: index.html
      volumes:
        - name: nginx-conf
          configMap:
            name: nginx-index-html-configmap

---
apiVersion: v1
kind: ConfigMap
metadata:
  name: nginx-index-html-configmap
data:
  index.html: |
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <html>
    <head>

    <style>
    .animated_rainbow_1 {
        font-size: 100px;
        background-image: -webkit-linear-gradient(left, #f00, #ff2b00, #f50, #ff8000, #fa0, #ffd500, #ff0, #d4ff00, #af0, #80ff00, #5f0, #2bff00, #0f0, #00ff2a, #0f5, #00ff80, #0fa, #00ffd5, #0ff, #00d5ff, #0af, #0080ff, #05f, #002aff, #00f, #2b00ff, #50f, #8000ff, #a0f, #d400ff, #f0f, #ff00d4, #f0a, #ff0080, #f05, #ff002b, #f00);
        -webkit-animation: animatedBackground_a 5s linear infinite alternate;
        -webkit-background-clip: text;
        -webkit-text-fill-color: #0000;
        background-clip: text;
        text-align: center;
        font-weight: bold;
    }

    @keyframes animatedBackground_a {
        0% { background-position: 0 0 }
        100% { background-position: -500px 0 }
    }

    </style>
    </head>
    <body>

    <div class="animated_rainbow_1" style="font-size: 150px;">Hola</div>
    <div class="animated_rainbow_1">Ke ac√© che?</div>

    </body>
    </html>

---
apiVersion: v1
kind: Service
metadata:
  name: kuard
spec:
  ports:
    - port: 80
      targetPort: 80
      protocol: TCP
  selector:
    app: kuard

---
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: kuard
  annotations:
    kubernetes.io/ingress.class: "nginx"
    cert-manager.io/cluster-issuer: "letsencrypt-prod"

spec:
  tls:
    - hosts:
        - test.nahue.com.ar
      secretName: quickstart-example-tls
  rules:
    - host: test.nahue.com.ar
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: kuard
                port:
                  number: 80
